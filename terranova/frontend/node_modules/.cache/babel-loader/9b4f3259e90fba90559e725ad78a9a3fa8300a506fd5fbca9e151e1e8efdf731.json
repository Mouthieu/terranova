{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Mouthieu.MB-TUF\\\\Documents\\\\cours-et-projets\\\\imt\\\\projet-innov\\\\terranova\\\\terranova\\\\frontend\\\\src\\\\components\\\\SubscribeButton.js\",\n  _s = $RefreshSig$();\nimport axios from 'axios';\nimport React, { useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SubscribeButton = ({\n  collectionPoint\n}) => {\n  _s();\n  const [subscribed, setSubscribed] = useState(false);\n  const token = localStorage.getItem('token');\n  const handleSubscribe = async () => {\n    if (!token) {\n      alert('Vous devez être connecté pour vous abonner.');\n      return;\n    }\n    try {\n      let state = subscribed ? 'unsubscribe' : 'subscribe';\n      const response = await axios.post(`http://127.0.0.1:8000/api/${state}/${collectionPoint.id}/`, {}, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      if (response.status === 201) {\n        setSubscribed(true);\n        alert('Vous êtes maintenant abonné à ce point de collecte!');\n      }\n      if (response.status === 200) {\n        setSubscribed(false);\n        alert('Vous êtes désabonné de ce point de collecte.');\n      }\n    } catch (error) {\n      console.error('Erreur lors de l\\'abonnement', error);\n      alert('Une erreur est survenue lors de l\\'abonnement');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"button\", {\n    onClick: handleSubscribe,\n    children: subscribed ? 'Se désabonner' : 'S\\'abonner'\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 5\n  }, this);\n};\n_s(SubscribeButton, \"XftjTz7cdp66AWREUYZWTgkwWiM=\");\n_c = SubscribeButton;\nexport default SubscribeButton;\nvar _c;\n$RefreshReg$(_c, \"SubscribeButton\");","map":{"version":3,"names":["axios","React","useState","jsxDEV","_jsxDEV","SubscribeButton","collectionPoint","_s","subscribed","setSubscribed","token","localStorage","getItem","handleSubscribe","alert","state","response","post","id","headers","Authorization","status","error","console","onClick","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Mouthieu.MB-TUF/Documents/cours-et-projets/imt/projet-innov/terranova/terranova/frontend/src/components/SubscribeButton.js"],"sourcesContent":["import axios from 'axios';\r\nimport React, { useState } from 'react';\r\n\r\nconst SubscribeButton = ({ collectionPoint }) => {\r\n  const [subscribed, setSubscribed] = useState(false);\r\n  const token = localStorage.getItem('token');\r\n\r\n  const handleSubscribe = async () => {\r\n    if (!token) {\r\n      alert('Vous devez être connecté pour vous abonner.');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      let state = subscribed ? 'unsubscribe' : 'subscribe';\r\n      const response = await axios.post(\r\n        `http://127.0.0.1:8000/api/${state}/${collectionPoint.id}/`,\r\n        {},\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        }\r\n      );\r\n\r\n      if (response.status === 201) {\r\n        setSubscribed(true);\r\n        alert('Vous êtes maintenant abonné à ce point de collecte!');\r\n      }\r\n      if (response.status === 200) {\r\n        setSubscribed(false);\r\n        alert('Vous êtes désabonné de ce point de collecte.');\r\n      }\r\n    } catch (error) {\r\n      console.error('Erreur lors de l\\'abonnement', error);\r\n      alert('Une erreur est survenue lors de l\\'abonnement');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <button onClick={handleSubscribe}>\r\n      {subscribed ? 'Se désabonner' : 'S\\'abonner'}\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default SubscribeButton;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAExC,MAAMC,eAAe,GAAGA,CAAC;EAAEC;AAAgB,CAAC,KAAK;EAAAC,EAAA;EAC/C,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGP,QAAQ,CAAC,KAAK,CAAC;EACnD,MAAMQ,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAE3C,MAAMC,eAAe,GAAG,MAAAA,CAAA,KAAY;IAClC,IAAI,CAACH,KAAK,EAAE;MACVI,KAAK,CAAC,6CAA6C,CAAC;MACpD;IACF;IAEA,IAAI;MACF,IAAIC,KAAK,GAAGP,UAAU,GAAG,aAAa,GAAG,WAAW;MACpD,MAAMQ,QAAQ,GAAG,MAAMhB,KAAK,CAACiB,IAAI,CAC/B,6BAA6BF,KAAK,IAAIT,eAAe,CAACY,EAAE,GAAG,EAC3D,CAAC,CAAC,EACF;QACEC,OAAO,EAAE;UACPC,aAAa,EAAE,UAAUV,KAAK;QAChC;MACF,CACF,CAAC;MAED,IAAIM,QAAQ,CAACK,MAAM,KAAK,GAAG,EAAE;QAC3BZ,aAAa,CAAC,IAAI,CAAC;QACnBK,KAAK,CAAC,qDAAqD,CAAC;MAC9D;MACA,IAAIE,QAAQ,CAACK,MAAM,KAAK,GAAG,EAAE;QAC3BZ,aAAa,CAAC,KAAK,CAAC;QACpBK,KAAK,CAAC,8CAA8C,CAAC;MACvD;IACF,CAAC,CAAC,OAAOQ,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;MACpDR,KAAK,CAAC,+CAA+C,CAAC;IACxD;EACF,CAAC;EAED,oBACEV,OAAA;IAAQoB,OAAO,EAAEX,eAAgB;IAAAY,QAAA,EAC9BjB,UAAU,GAAG,eAAe,GAAG;EAAY;IAAAkB,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACtC,CAAC;AAEb,CAAC;AAACtB,EAAA,CAzCIF,eAAe;AAAAyB,EAAA,GAAfzB,eAAe;AA2CrB,eAAeA,eAAe;AAAC,IAAAyB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}